Idiopathic pulmonary fibrosis primarily affects both the upper lobes of the lungs and is characterized by productive cough and obstructive lung function impairment on pulmonary function testing.